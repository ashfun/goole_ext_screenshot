var cssBorderSet={yellow:"solid 5px #ffd700",red:"solid 5px #dc143c",blue:"solid 5px #0000cd"};$("#focus_mode").on("click",()=>{null!=localStorage.getItem("border_color")?borderColor=localStorage.getItem("border_color"):borderColor="yellow",chrome.tabs.query({active:!0,currentWindow:!0},(function(tabs){chrome.tabs.sendMessage(tabs[0].id,{type:"drawing",border_color:borderColor})})),window.close()}),$("#reset_mode").on("click",()=>{chrome.tabs.query({active:!0,currentWindow:!0},(function(tabs){chrome.tabs.sendMessage(tabs[0].id,{type:"reset"})})),window.close()}),$("#screenshot").on("click",()=>{chrome.tabs.captureVisibleTab(null,{},(function(imageURI){var url=imageURI.replace(/^data:image\/[^;]/,"data:application/octet-stream"),file_name="screenshot",date=new Date,date_string=String(date.getTime());chrome.tabs.query({active:!0},(function(tab){file_name=(file_name=(file_name=(file_name=(file_name=String(tab[0].url)).toLowerCase()).replace("/([a-z])+:///","")).substr(file_name.indexOf("://")+3)).replace(/[^a-z0-9]/g,"-"),chrome.downloads.download({url:url,filename:file_name+date_string+".png"})}))}))});var select=document.getElementById("border_color");select.onchange=function(){var selectedItem=this.options[this.selectedIndex];borderColor=selectedItem.value,localStorage.setItem("border_color",borderColor),$("#sample_drawing_target").css("border",cssBorderSet[borderColor])},$((function(){function initialSetup(){null!=localStorage.getItem("border_color")&&($("#sample_drawing_target").css("border",cssBorderSet[localStorage.getItem("border_color")]),$("#border_color").val(localStorage.getItem("border_color")))}initialSetup()}));